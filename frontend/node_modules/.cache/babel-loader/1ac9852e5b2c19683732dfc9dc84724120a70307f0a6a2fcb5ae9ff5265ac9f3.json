{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\SakthikumarAnbazhaga\\\\Downloads\\\\Leave-Request-System\\\\frontend\\\\src\\\\admin\\\\bulkimport.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport Papa from 'papaparse';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BulkImport() {\n  _s();\n  const [parsedUsers, setParsedUsers] = useState([]);\n  const [error, setError] = useState('');\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    if (!file) {\n      setError('Please upload a valid CSV file.');\n      return;\n    }\n    Papa.parse(file, {\n      header: true,\n      skipEmptyLines: true,\n      complete: results => {\n        const validUsers = results.data.map(row => {\n          var _row$name, _row$email, _row$position, _row$Manager, _row$password;\n          return {\n            name: (_row$name = row.name) === null || _row$name === void 0 ? void 0 : _row$name.trim(),\n            email: (_row$email = row.email) === null || _row$email === void 0 ? void 0 : _row$email.trim(),\n            position: (_row$position = row.position) === null || _row$position === void 0 ? void 0 : _row$position.trim(),\n            Manager: (_row$Manager = row.Manager) === null || _row$Manager === void 0 ? void 0 : _row$Manager.trim(),\n            password: (_row$password = row.password) === null || _row$password === void 0 ? void 0 : _row$password.trim(),\n            isAdmin: row.isAdmin\n          };\n        }).filter(user => user.name && user.email && user.position && user.Manager && user.password && user.isAdmin);\n        setParsedUsers(validUsers);\n        setError('');\n        if (validUsers.length == 0) {\n          setError('no User to Add');\n        }\n      },\n      error: () => {\n        setError('Failed to parse CSV. Please try again.');\n      }\n    });\n  };\n  const handleImport = async () => {\n    if (parsedUsers.length > 0) {\n      await axios.get('http://localhost:5000/api/leave/addUser', {\n        params: {\n          data: parsedUsers\n        }\n      }).then(response => {\n        console.log(response.data.status);\n      }).catch(err => {\n        console.log(err);\n      });\n      setParsedUsers([]);\n    } else {\n      setError('no users in this file');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-bulk-import\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"admin-upload-label\",\n      children: [\"\\uD83D\\uDCC1 Upload CSV\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: handleFileChange,\n        className: \"admin-file-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"admin-error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }, this), parsedUsers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-preview\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Preview (\", parsedUsers.length, \" users):\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: parsedUsers.slice(0, 5).map((user, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [user.name, \" \\u2014 \", user.email, \" \\u2014 \", user.position]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"admin-button\",\n        onClick: handleImport,\n        children: \"Import Users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(BulkImport, \"cakWbq9rXfgv1yURXGtA0HNScys=\");\n_c = BulkImport;\nexport default BulkImport;\nvar _c;\n$RefreshReg$(_c, \"BulkImport\");","map":{"version":3,"names":["React","useState","Papa","axios","jsxDEV","_jsxDEV","BulkImport","_s","parsedUsers","setParsedUsers","error","setError","handleFileChange","e","file","target","files","parse","header","skipEmptyLines","complete","results","validUsers","data","map","row","_row$name","_row$email","_row$position","_row$Manager","_row$password","name","trim","email","position","Manager","password","isAdmin","filter","user","length","handleImport","get","params","then","response","console","log","status","catch","err","className","children","type","onChange","fileName","_jsxFileName","lineNumber","columnNumber","slice","idx","onClick","_c","$RefreshReg$"],"sources":["C:/Users/SakthikumarAnbazhaga/Downloads/Leave-Request-System/frontend/src/admin/bulkimport.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport Papa from 'papaparse';\r\nimport axios from 'axios';\r\n\r\nfunction BulkImport() {\r\n  const [parsedUsers, setParsedUsers] = useState([]);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file ) {\r\n      setError('Please upload a valid CSV file.');\r\n      return;\r\n    }\r\n\r\n    Papa.parse(file, {\r\n      header: true,\r\n      skipEmptyLines: true,\r\n      complete: (results) => {\r\n        const validUsers = results.data\r\n          .map(row => ({\r\n            name: row.name?.trim(),\r\n            email: row.email?.trim(),\r\n            position: row.position?.trim(),\r\n            Manager: row.Manager?.trim(),\r\n            password: row.password?.trim(),\r\n            isAdmin: row.isAdmin\r\n          }))\r\n          .filter(user => user.name && user.email && user.position && user.Manager && user.password && user.isAdmin);\r\n        setParsedUsers(validUsers);\r\n        setError('');\r\n        if(validUsers.length == 0){\r\n          setError('no User to Add');\r\n        }\r\n      },\r\n      error: () => {\r\n        setError('Failed to parse CSV. Please try again.');\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleImport = async() => {\r\n    if (parsedUsers.length > 0) {\r\n      await axios\r\n      .get('http://localhost:5000/api/leave/addUser', {\r\n        params: { data: parsedUsers }\r\n      })\r\n      .then((response) => {\r\n        console.log(response.data.status);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n      setParsedUsers([]);\r\n    }\r\n    else{\r\n      setError('no users in this file')\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-bulk-import\">\r\n      <label className=\"admin-upload-label\">\r\n        üìÅ Upload CSV\r\n        <input type=\"file\" onChange={handleFileChange} className=\"admin-file-input\" />\r\n      </label>\r\n      {error && <p className=\"admin-error\">{error}</p>}\r\n\r\n      {parsedUsers.length > 0 && (\r\n        <div className=\"admin-preview\">\r\n          <h4>Preview ({parsedUsers.length} users):</h4>\r\n          <ul>\r\n            {parsedUsers.slice(0, 5).map((user, idx) => (\r\n              <li key={idx}>\r\n                {user.name} ‚Äî {user.email} ‚Äî {user.position}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n          <button className=\"admin-button\" onClick={handleImport}>Import Users</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BulkImport;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}