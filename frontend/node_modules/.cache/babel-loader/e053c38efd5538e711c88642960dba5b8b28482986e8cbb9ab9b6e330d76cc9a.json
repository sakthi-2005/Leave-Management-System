{"ast":null,"code":"var _jsxFileName = \"D:\\\\Leave-management-system\\\\frontend\\\\src\\\\admin\\\\bulkimport.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport Papa from 'papaparse';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BulkImport({\n  onClose\n}) {\n  _s();\n  const [parsedUsers, setParsedUsers] = useState([]);\n  const [error, setError] = useState('');\n  const token = localStorage.getItem('token');\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    if (!file) {\n      setError('Please upload a valid CSV file.');\n      return;\n    }\n    Papa.parse(file, {\n      header: true,\n      skipEmptyLines: true,\n      complete: results => {\n        console.log(results.data);\n        const validUsers = results.data.map(row => {\n          var _row$name, _row$email, _row$position, _row$Manager, _row$password;\n          return {\n            name: (_row$name = row.name) === null || _row$name === void 0 ? void 0 : _row$name.trim(),\n            email: (_row$email = row.email) === null || _row$email === void 0 ? void 0 : _row$email.trim(),\n            position: (_row$position = row.position) === null || _row$position === void 0 ? void 0 : _row$position.trim(),\n            ManagerId: (_row$Manager = row.Manager) === null || _row$Manager === void 0 ? void 0 : _row$Manager.trim(),\n            password: (_row$password = row.password) === null || _row$password === void 0 ? void 0 : _row$password.trim(),\n            isAdmin: row.isAdmin\n          };\n        }).filter(user => user.name && user.email && user.position && user.ManagerId && user.password && user.isAdmin);\n        setParsedUsers(validUsers);\n        setError('');\n        if (validUsers.length == 0) {\n          setError('no User to Add');\n        }\n      },\n      error: () => {\n        setError('Failed to parse CSV. Please try again.');\n      }\n    });\n  };\n  const handleImport = async () => {\n    if (parsedUsers.length > 0) {\n      await axios.post('http://localhost:5000/api/admin/addUser', {\n        params: {\n          data: parsedUsers\n        },\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      }).then(response => {\n        console.log(response.data.status);\n        onClose();\n      }).catch(err => {\n        localStorage.removeItem('user');\n        console.log(err);\n      });\n      setParsedUsers([]);\n    } else {\n      setError('no users in this file');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-bulk-import\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"admin-upload-label\",\n      children: [\"\\uD83D\\uDCC1 Upload CSV\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: handleFileChange,\n        className: \"admin-file-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"admin-error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }, this), parsedUsers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-preview\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: [\"Preview (\", parsedUsers.length, \" users):\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: parsedUsers.map((user, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [user.name, \" \\u2014 \", user.position]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"admin-button\",\n        onClick: handleImport,\n        children: \"Import Users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s(BulkImport, \"cakWbq9rXfgv1yURXGtA0HNScys=\");\n_c = BulkImport;\nexport default BulkImport;\nvar _c;\n$RefreshReg$(_c, \"BulkImport\");","map":{"version":3,"names":["React","useState","Papa","axios","jsxDEV","_jsxDEV","BulkImport","onClose","_s","parsedUsers","setParsedUsers","error","setError","token","localStorage","getItem","handleFileChange","e","file","target","files","parse","header","skipEmptyLines","complete","results","console","log","data","validUsers","map","row","_row$name","_row$email","_row$position","_row$Manager","_row$password","name","trim","email","position","ManagerId","Manager","password","isAdmin","filter","user","length","handleImport","post","params","headers","then","response","status","catch","err","removeItem","className","children","type","onChange","fileName","_jsxFileName","lineNumber","columnNumber","idx","onClick","_c","$RefreshReg$"],"sources":["D:/Leave-management-system/frontend/src/admin/bulkimport.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport Papa from 'papaparse';\r\nimport axios from 'axios';\r\n\r\nfunction BulkImport({onClose}) {\r\n  const [parsedUsers, setParsedUsers] = useState([]);\r\n  const [error, setError] = useState('');\r\n  const token = localStorage.getItem('token');\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) {\r\n      setError('Please upload a valid CSV file.');\r\n      return;\r\n    }\r\n\r\n    Papa.parse(file, {\r\n      header: true,\r\n      skipEmptyLines: true,\r\n      complete: (results) => {\r\n        console.log(results.data)\r\n        const validUsers = results.data\r\n          .map(row => ({\r\n            name: row.name?.trim(),\r\n            email: row.email?.trim(),\r\n            position: row.position?.trim(),\r\n            ManagerId: row.Manager?.trim(),\r\n            password: row.password?.trim(),\r\n            isAdmin: row.isAdmin\r\n          }))\r\n          .filter(user => user.name && user.email && user.position && user.ManagerId && user.password && user.isAdmin);\r\n        setParsedUsers(validUsers);\r\n        setError('');\r\n        if(validUsers.length == 0){\r\n          setError('no User to Add');\r\n        }\r\n      },\r\n      error: () => {\r\n        setError('Failed to parse CSV. Please try again.');\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleImport = async() => {\r\n    if (parsedUsers.length > 0) {\r\n      await axios\r\n      .post('http://localhost:5000/api/admin/addUser', {\r\n        params: { data: parsedUsers },\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      })\r\n      .then((response) => {\r\n        console.log(response.data.status);\r\n        onClose()\r\n      })\r\n      .catch((err) => {\r\n        localStorage.removeItem('user');\r\n        console.log(err);\r\n      });\r\n      setParsedUsers([]);\r\n    }\r\n    else{\r\n      setError('no users in this file')\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-bulk-import\">\r\n      <label className=\"admin-upload-label\">\r\n        üìÅ Upload CSV\r\n        <input type=\"file\" onChange={handleFileChange} className=\"admin-file-input\" />\r\n      </label>\r\n      {error && <p className=\"admin-error\">{error}</p>}\r\n\r\n      {parsedUsers.length > 0 && (\r\n        <div className=\"admin-preview\">\r\n          <h4>Preview ({parsedUsers.length} users):</h4>\r\n          <ul>\r\n            {parsedUsers.map((user, idx) => (\r\n              <li key={idx}>\r\n                {user.name} ‚Äî {user.position}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n          <button className=\"admin-button\" onClick={handleImport}>Import Users</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BulkImport;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}